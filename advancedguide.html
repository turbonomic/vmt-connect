<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Usage &mdash; vmt-connect 3.6.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Developer Interfaces" href="reference.html" />
    <link rel="prev" title="Basic User Guide" href="userguide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> vmt-connect
          </a>
              <div class="version">
                3.6.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="userguide.html">Basic User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#connections">Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#paged-results">Paged Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-pagination">Basic Pagination</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#response-filters">Response Filters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#native-dsl">Native DSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">jq Script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#version-control">Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#credentials">Credentials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-interface">Module Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-interface">Command-line Interface</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Developer Interfaces</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">vmt-connect</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Advanced Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/advancedguide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="advanced-usage">
<h1>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this heading"></a></h1>
<section id="connections">
<h2>Connections<a class="headerlink" href="#connections" title="Permalink to this heading"></a></h2>
<p>All parameters to the <a class="reference internal" href="reference.html#vmtconnect.Connection" title="vmtconnect.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> and <a class="reference internal" href="reference.html#vmtconnect.Session" title="vmtconnect.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
classes are technically optional, however Turbonomic does require authentication.
Thus while <code class="docutils literal notranslate"><span class="pre">vmtconnect.Connection()</span></code> and <code class="docutils literal notranslate"><span class="pre">vmtconnect.Session()</span></code> are valid
calls, they will fail authentication checks regardless. All connections must
provide either a <cite>username</cite> and <cite>password</cite>, or an <cite>auth</cite> string. The <cite>auth</cite> string
is simply a base64 encoded ‘Basic Authentication’ format string containing the
username and password joined by a colon (:).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># generating a base64 auth string hash in Linux</span>
<span class="nb">echo</span> -n <span class="s2">&quot;bob:insecure123&quot;</span> <span class="p">|</span> base64
</pre></div>
</div>
<p>The <cite>host</cite> parameter defaults to the string literal <code class="docutils literal notranslate"><span class="pre">localhost</span></code> for convenience
when working with code that will live on the Turbonomic control instance itself.
If using an IPv6 address, you will need to provide the requisite square brackets
surrounding the address as defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc2732">RFC 2732</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># all of these are equivalent</span>
<span class="n">auth</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">vmt</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>                <span class="c1"># &#39;localhost&#39;</span>
<span class="n">vmt</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>   <span class="c1"># IPv4</span>
<span class="n">vmt</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;[::1]&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>  <span class="c1"># IPv6</span>
</pre></div>
</div>
<p>Additional HTTP headers may be provided using the <cite>headers</cite> parameters. Headers
must be supplied in a format compatible with <a class="reference external" href="https://requests.readthedocs.io/en/latest/">Requests</a>. Any headers supplied
in this manner will be attached to all requests sent. If you require specific
headers for a specific call, you may attach headers to the  individual query
directly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">customheaders</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;Pragma&#39;</span><span class="p">:</span> <span class="s1">&#39;no-cache&#39;</span><span class="p">,</span>
  <span class="s1">&#39;X-Forwarded-For&#39;</span><span class="p">,</span> <span class="s1">&#39;129.78.138.66&#39;</span>
<span class="p">}</span>

<span class="n">vmt</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="s1">&#39;...&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">customheaders</span><span class="p">)</span>
</pre></div>
</div>
<p>Like headers, Requests <a class="reference external" href="https://requests.readthedocs.io/en/latest/user/advanced/#proxies">proxies</a> are also supported in the proper format, and
are passed to the <cite>proxies</cite> parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;http&#39;</span><span class="p">:</span> <span class="s1">&#39;http://10.10.1.10:3128&#39;</span><span class="p">,</span>
  <span class="s1">&#39;https&#39;</span><span class="p">:</span> <span class="s1">&#39;http://10.10.1.10:1080&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">vmt</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="s1">&#39;...&#39;</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="paged-results">
<h2>Paged Results<a class="headerlink" href="#paged-results" title="Permalink to this heading"></a></h2>
<p>For versions of Turbonomic that support paged responses, <em>vmt-connect</em> provides
an optional <a class="reference internal" href="reference.html#vmtconnect.Pager" title="vmtconnect.Pager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pager</span></code></a> class for working with the paginated
results. By default, <em>vmt-connect</em> will return the first page of results only
unless the <strong>pager</strong> flag is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<section id="basic-pagination">
<h3>Basic Pagination<a class="headerlink" href="#basic-pagination" title="Permalink to this heading"></a></h3>
<p>When querying all entities in a given market, for example, you will by default
receive the first set of entries (300-500 depending on version) in the usual list
of dictionaries format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Automatic pagination in Turbonomic Classic is not implemented on all endpoints
that support pagination. Some, such as market actions, default to the historical
behavior of returning all results. When using Classic endpoints with pagination
it is recommended to manually set a <strong>limit</strong> value of reasonable size, such
as 100.</p>
</div>
<p>Although <em>vmt-connect</em> detects the response is paged, in order to keep backwards
compatibility with previous code it returns the expected response that previous
versions would, which in this case is the first page of the result set. You
can validate by checking the headers returned:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()</span>

<span class="k">if</span> <span class="s1">&#39;x-next-cursor&#39;</span> <span class="ow">in</span> <span class="n">conn</span><span class="o">.</span><span class="n">last_response</span><span class="o">.</span><span class="n">headers</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Paged response&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>One option is to let the pager fetch all the results in the cursor and combine
them into a single monolithic response using the <strong>fetch_all</strong> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">fetch_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This works if the response is small. Larger responses will use excessive amounts
of memory caching the results, and we will generally see better performance by
looping over the pages. We do this by using the <a class="reference internal" href="reference.html#vmtconnect.Pager.next" title="vmtconnect.Pager.next"><code class="xref py py-attr docutils literal notranslate"><span class="pre">next</span></code></a>
property of the <a class="reference internal" href="reference.html#vmtconnect.Pager" title="vmtconnect.Pager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pager</span></code></a>, and checking if it is <a class="reference internal" href="reference.html#vmtconnect.Pager.complete" title="vmtconnect.Pager.complete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">complete</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">pager</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>
    <span class="c1"># filter out just the entities we need - VMs with the word &#39;blue&#39; in</span>
    <span class="c1"># the name</span>
    <span class="n">entitycache</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">next</span> <span class="k">if</span> <span class="s1">&#39;blue&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;displayName&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>

    <span class="c1"># do something with our data</span>
    <span class="n">interesting_things</span><span class="p">(</span><span class="n">entitycache</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="response-filters">
<h2>Response Filters<a class="headerlink" href="#response-filters" title="Permalink to this heading"></a></h2>
<p>Starting in v3.4.0, <em>vmt-connect</em> supports filtering JSON responses in order to
reduce memory consumption when working with extremely large responses, and to
permit fine grained control over the data received. Two methods of filtering
are supported; a custom filtering domain specific language (DSL), and <a class="reference external" href="https://stedolan.github.io/jq/">jq</a> script
syntax. The native DSL provides a simplified set of features, which provide
significantly faster performance and memory reduction over jq. Using <a class="reference external" href="https://stedolan.github.io/jq/manual/">jq script</a>
provides significantly more flexibility in terms of filtering and even re-writing
the JSON response, at the cost of both speed and memory. Regardless which filter
style is used, the filter is applied to each top-most object in the response.
Thus if the response is a list, each object in the list will be filtered one at
a time. If the response is a single key-value pari, the filter will be applied
once to the whole response.</p>
<p>Response filters may be applied to almost any method supported by <em>vmt-connect</em>,
direct requests, as well as paged results. To apply a filter to a request simply
add the <strong>filter</strong> keyword argument to the method call with the corresponding
filter you wish to apply:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example filtered request</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
<span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;uuid,displayName,details&#39;</span><span class="p">]</span>
<span class="n">actions</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_actions</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Example filtered request with pagination and cursor size limit</span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vconnmt</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
<span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;uuid,displayName,details&#39;</span><span class="p">]</span>
<span class="n">actions</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_actions</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span> <span class="n">pager</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>For the purposes of demonstrating filter examples in the sub-sections below,
please refer to this example JSON response.</p>
<details>
<summary><b>Show/Hide Example</b></summary><div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">action.json</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9223304850035275760&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;actionImpactID&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">9223304850035276000</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;createTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-08-04T12:21:44-04:00&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;actionType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RIGHT_SIZE&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;actionState&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PENDING_ACCEPT&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;actionMode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MANUAL&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;details&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Scale down VMem for VirtualMachine cert58 from 14 GB to 12 GB&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;importance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;421c5dac-3d10-6d6d-2183-5c01f7b2ace9&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;displayName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cert58&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;className&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VirtualMachine&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;discoveredBy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;_UFCnUMYUEeqw6vcwGrTNAw&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;displayName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vcenter.demo.example.com&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vCenter&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;readonly&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;currentEntity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;_lmEJ8tZuEeqG6vS3wpTEow&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;className&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VMem&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;newEntity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;_t9Euw9dLEeqG6vS3wpTEow&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;className&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VMem&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;aspects&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;virtualMachineAspect&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Linux (Free)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VMEntityAspectApiDTO&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;currentValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;14680064.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;newValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;12582912.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;resizeToValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;12582912.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;stats&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;costPrice&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;filters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">          </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;savingsType&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;savings&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;currentLocation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a600946a2bdb36c3527fa57bd35a5b8db76dd552&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;displayName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DemoDC&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;className&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataCenter&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;newLocation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a600946a2bdb36c3527fa57bd35a5b8db76dd552&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;displayName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DemoDC&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;className&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DataCenter&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;actionID&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3208600312656</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
</div>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
<section id="native-dsl">
<h3>Native DSL<a class="headerlink" href="#native-dsl" title="Permalink to this heading"></a></h3>
<p>Native DSL filters are constructed using a list of filter strings. Each string
contains either a list of keys, or a dot-reference path to a single key to extract
from the source JSON response. You only need to specify the minimum level of depth
required to retrieve the contents desired, thus if you want all contents under
a specific key, you only need provide the path to said key. Multiple filters
for the same top-level key will be merged, thus you can cherry pick a subset of
an object using multiple filter entries. The below examples demonstrate these
behaviors.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Multiple Keys Expanded</span><a class="headerlink" href="#id5" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;uuid&#39;</span><span class="p">,</span>
  <span class="s1">&#39;details&#39;</span><span class="p">,</span>
  <span class="s1">&#39;actionType&#39;</span><span class="p">,</span>
  <span class="s1">&#39;target&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="ex1">
<div class="code-block-caption"><span class="caption-text">Multiple Keys Compact</span><a class="headerlink" href="#ex1" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;uuid,details,actionType,target&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>This above equivalent examples will extract only the <strong>uuid</strong>, <strong>details</strong>,
<strong>actionType</strong>, and the entire <strong>target</strong> object from every object in the response
list. All other fields will be discarded.</p>
<div class="literal-block-wrapper docutils container" id="ex2">
<div class="code-block-caption"><span class="caption-text">Sub-selecting Parts of an object</span><a class="headerlink" href="#ex2" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;uuid,details,actionType&#39;</span><span class="p">,</span>
  <span class="s1">&#39;target.uuid&#39;</span><span class="p">,</span>
  <span class="s1">&#39;target.displayName&#39;</span>
  <span class="s1">&#39;target.discoveredBy.displayName&#39;</span><span class="p">,</span>
  <span class="s1">&#39;currentValue&#39;</span><span class="p">,</span>
  <span class="s1">&#39;newValue&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>Here we have extracted the <strong>uuid</strong>, <strong>details</strong>, and <strong>actionType</strong> again. In
addition a sub-selection of the <strong>target</strong> object have been pulled, as well as
the <strong>currentValue</strong> and <strong>newValue</strong> top level keys. All the <strong>target</strong> parts
will be returned in their original structure, as referenced by the dot notation.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Sub-selecting Parts of an object</span><a class="headerlink" href="#id6" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;uuid,details,actionType,stats&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>Nested lists are automatically parsed to include all items by default. Although
you cannot filter individual indices based on their children, you can sub-select
or slice portions of the list using Python’s slicing syntax, as shown in the
following examples.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Sub-selecting a specific item in a list</span><a class="headerlink" href="#id7" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;uuid,details,actionType&#39;</span><span class="p">,</span>
  <span class="s1">&#39;stats[0]&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Sub-selecting a range from a list, with stepping</span><a class="headerlink" href="#id8" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;uuid,details,actionType&#39;</span><span class="p">,</span>
  <span class="s1">&#39;stats[2:10:2]&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">All of these are equivalent</span><a class="headerlink" href="#id9" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;stats&#39;</span><span class="p">,</span>
  <span class="s1">&#39;stats[]&#39;</span><span class="p">,</span>
  <span class="s1">&#39;stats[*]&#39;</span><span class="p">,</span>
  <span class="s1">&#39;stats[0:]&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Dot-referencing with lists</span><a class="headerlink" href="#id10" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;uuid,details,actionType&#39;</span><span class="p">,</span>
  <span class="s1">&#39;stats.name&#39;</span><span class="p">,</span>
  <span class="s1">&#39;stats.value&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>A more formal definition of the DSL is provided in the following rail-road diagrams.</p>
<p><strong>Filter</strong></p>
<svg class="railroad-diagram" width="616.5" height="122" viewBox="0 0 616.5 122" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g transform="translate(.5 .5)">
<g>
<path d="M20 21v20m0 -10h20"></path>
</g>
<path d="M40 31h10"></path>
<g class="comment ">
<path d="M50 31h0"></path>
<path d="M102 31h0"></path>
<text x="76" y="36" class="comment">filter</text>
</g>
<path d="M102 31h10"></path>
<path d="M112 31h10"></path>
<g class="non-terminal ">
<path d="M122 31h0"></path>
<path d="M184.5 31h0"></path>
<rect x="122" y="20" width="62.5" height="22"></rect>
<text x="153.25" y="35">field</text>
</g>
<path d="M184.5 31h10"></path>
<g>
<path d="M194.5 31h0"></path>
<path d="M385.5 31h0"></path>
<path d="M194.5 31h20"></path>
<g>
<path d="M214.5 31h151"></path>
</g>
<path d="M365.5 31h20"></path>
<path d="M194.5 31a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path>
<g>
<path d="M214.5 74h0"></path>
<path d="M365.5 74h0"></path>
<rect x="214.5" y="55" width="151" height="47" rx="10" ry="10" class="group-box"></rect>
<g>
<path d="M214.5 74h10"></path>
<path d="M355.5 74h10"></path>
<path d="M224.5 74h10"></path>
<g>
<path d="M234.5 74h0"></path>
<path d="M345.5 74h0"></path>
<g class="terminal ">
<path d="M234.5 74h0"></path>
<path d="M263 74h0"></path>
<rect x="234.5" y="63" width="28.5" height="22" rx="10" ry="10"></rect>
<text x="248.75" y="78">.</text>
</g>
<path d="M263 74h10"></path>
<path d="M273 74h10"></path>
<g class="non-terminal ">
<path d="M283 74h0"></path>
<path d="M345.5 74h0"></path>
<rect x="283" y="63" width="62.5" height="22"></rect>
<text x="314.25" y="78">field</text>
</g>
</g>
<path d="M345.5 74h10"></path>
<path d="M234.5 74a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path>
<g>
<path d="M234.5 94h111"></path>
</g>
<path d="M345.5 94a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path>
</g>
<g class="comment ">
<path d="M214.5 47h0"></path>
<path d="M259.5 47h0"></path>
<text x="237" y="52" class="comment">child</text>
</g>
</g>
<path d="M365.5 74a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path>
</g>
<g>
<path d="M385.5 31h0"></path>
<path d="M576.5 31h0"></path>
<path d="M385.5 31h20"></path>
<g>
<path d="M405.5 31h151"></path>
</g>
<path d="M556.5 31h20"></path>
<path d="M385.5 31a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path>
<g>
<path d="M405.5 74h0"></path>
<path d="M556.5 74h0"></path>
<rect x="405.5" y="55" width="151" height="47" rx="10" ry="10" class="group-box"></rect>
<g>
<path d="M405.5 74h10"></path>
<path d="M546.5 74h10"></path>
<path d="M415.5 74h10"></path>
<g>
<path d="M425.5 74h0"></path>
<path d="M536.5 74h0"></path>
<g class="terminal ">
<path d="M425.5 74h0"></path>
<path d="M454 74h0"></path>
<rect x="425.5" y="63" width="28.5" height="22" rx="10" ry="10"></rect>
<text x="439.75" y="78">,</text>
</g>
<path d="M454 74h10"></path>
<path d="M464 74h10"></path>
<g class="non-terminal ">
<path d="M474 74h0"></path>
<path d="M536.5 74h0"></path>
<rect x="474" y="63" width="62.5" height="22"></rect>
<text x="505.25" y="78">field</text>
</g>
</g>
<path d="M536.5 74h10"></path>
<path d="M425.5 74a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path>
<g>
<path d="M425.5 94h111"></path>
</g>
<path d="M536.5 94a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path>
</g>
<g class="comment ">
<path d="M405.5 47h0"></path>
<path d="M464.5 47h0"></path>
<text x="435" y="52" class="comment">sibling</text>
</g>
</g>
<path d="M556.5 74a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path>
</g>
<path d="M 576.5 31 h 20 m 0 -10 v 20"></path>
</g>
<style>
	svg {
		background-color: hsl(30,20%,95%);
	}
	path {
		stroke-width: 3;
		stroke: black;
		fill: rgba(0,0,0,0);
	}
	text {
		font: bold 14px monospace;
		text-anchor: middle;
		white-space: pre;
	}
	text.diagram-text {
		font-size: 12px;
	}
	text.diagram-arrow {
		font-size: 16px;
	}
	text.label {
		text-anchor: start;
	}
	text.comment {
		font: italic 12px monospace;
	}
	g.non-terminal text {
		/&#42;font-style: italic;&#42;/
	}
	rect {
		stroke-width: 3;
		stroke: black;
		fill: hsl(120,100%,90%);
	}
	rect.group-box {
		stroke: gray;
		stroke-dasharray: 10 5;
		fill: none;
	}
	path.diagram-text {
		stroke-width: 3;
		stroke: black;
		fill: white;
		cursor: help;
	}
	g.diagram-text:hover path.diagram-text {
		fill: #eee;
	}</style>
</svg>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Field</strong></p>
<svg class="railroad-diagram" width="455.5" height="132" viewBox="0 0 455.5 132" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g transform="translate(.5 .5)">
<g>
<path d="M20 21v20m0 -10h20"></path>
</g>
<path d="M40 31h10"></path>
<g class="comment ">
<path d="M50 31h0"></path>
<path d="M95 31h0"></path>
<text x="72.5" y="36" class="comment">field</text>
</g>
<path d="M95 31h10"></path>
<path d="M105 31h10"></path>
<g class="non-terminal ">
<path d="M115 31h0"></path>
<path d="M186 31h0"></path>
<rect x="115" y="20" width="71" height="22"></rect>
<text x="150.5" y="35">string</text>
</g>
<path d="M186 31h10"></path>
<g>
<path d="M196 31h0"></path>
<path d="M415.5 31h0"></path>
<path d="M196 31h20"></path>
<g>
<path d="M216 31h179.5"></path>
</g>
<path d="M395.5 31h20"></path>
<path d="M196 31a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
<g>
<path d="M216 51h0"></path>
<path d="M395.5 51h0"></path>
<g class="terminal ">
<path d="M216 51h0"></path>
<path d="M244.5 51h0"></path>
<rect x="216" y="40" width="28.5" height="22" rx="10" ry="10"></rect>
<text x="230.25" y="55">&#91;</text>
</g>
<path d="M244.5 51h10"></path>
<g>
<path d="M254.5 51h0"></path>
<path d="M357 51h0"></path>
<path d="M254.5 51h20"></path>
<g>
<path d="M274.5 51h62.5"></path>
</g>
<path d="M337 51h20"></path>
<path d="M254.5 51a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
<g class="terminal ">
<path d="M274.5 71h17"></path>
<path d="M320 71h17"></path>
<rect x="291.5" y="60" width="28.5" height="22" rx="10" ry="10"></rect>
<text x="305.75" y="75">&#42;</text>
</g>
<path d="M337 71a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
<path d="M254.5 51a10 10 0 0 1 10 10v30a10 10 0 0 0 10 10"></path>
<g class="non-terminal ">
<path d="M274.5 101h0"></path>
<path d="M337 101h0"></path>
<rect x="274.5" y="90" width="62.5" height="22"></rect>
<text x="305.75" y="105">slice</text>
</g>
<path d="M337 101a10 10 0 0 0 10 -10v-30a10 10 0 0 1 10 -10"></path>
</g>
<path d="M357 51h10"></path>
<g class="terminal ">
<path d="M367 51h0"></path>
<path d="M395.5 51h0"></path>
<rect x="367" y="40" width="28.5" height="22" rx="10" ry="10"></rect>
<text x="381.25" y="55">&#93;</text>
</g>
</g>
<path d="M395.5 51a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
</g>
<path d="M 415.5 31 h 20 m 0 -10 v 20"></path>
</g>
<style>
	svg {
		background-color: hsl(30,20%,95%);
	}
	path {
		stroke-width: 3;
		stroke: black;
		fill: rgba(0,0,0,0);
	}
	text {
		font: bold 14px monospace;
		text-anchor: middle;
		white-space: pre;
	}
	text.diagram-text {
		font-size: 12px;
	}
	text.diagram-arrow {
		font-size: 16px;
	}
	text.label {
		text-anchor: start;
	}
	text.comment {
		font: italic 12px monospace;
	}
	g.non-terminal text {
		/&#42;font-style: italic;&#42;/
	}
	rect {
		stroke-width: 3;
		stroke: black;
		fill: hsl(120,100%,90%);
	}
	rect.group-box {
		stroke: gray;
		stroke-dasharray: 10 5;
		fill: none;
	}
	path.diagram-text {
		stroke-width: 3;
		stroke: black;
		fill: white;
		cursor: help;
	}
	g.diagram-text:hover path.diagram-text {
		fill: #eee;
	}</style>
</svg>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Slice</strong></p>
<svg class="railroad-diagram" width="720.5" height="152" viewBox="0 0 720.5 152" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g transform="translate(.5 .5)">
<g>
<path d="M20 20v20m0 -10h20"></path>
</g>
<path d="M40 30h10"></path>
<g class="comment ">
<path d="M50 30h0"></path>
<path d="M95 30h0"></path>
<text x="72.5" y="35" class="comment">slice</text>
</g>
<path d="M95 30h10"></path>
<g>
<path d="M105 30h0"></path>
<path d="M244.5 30h0"></path>
<path d="M105 30h20"></path>
<g>
<path d="M125 30h99.5"></path>
</g>
<path d="M224.5 30h20"></path>
<path d="M105 30a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path>
<g>
<path d="M125 73h0"></path>
<path d="M224.5 73h0"></path>
<rect x="125" y="54" width="99.5" height="38" rx="10" ry="10" class="group-box"></rect>
<g class="non-terminal ">
<path d="M125 73h10"></path>
<path d="M214.5 73h10"></path>
<rect x="135" y="62" width="79.5" height="22"></rect>
<text x="174.75" y="77">integer</text>
</g>
<g class="comment ">
<path d="M125 46h0"></path>
<path d="M170 46h0"></path>
<text x="147.5" y="51" class="comment">start</text>
</g>
</g>
<path d="M224.5 73a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path>
</g>
<g>
<path d="M244.5 30h0"></path>
<path d="M680.5 30h0"></path>
<path d="M244.5 30h20"></path>
<g>
<path d="M264.5 30h396"></path>
</g>
<path d="M660.5 30h20"></path>
<path d="M244.5 30a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
<g>
<path d="M264.5 50h0"></path>
<path d="M660.5 50h0"></path>
<g class="terminal ">
<path d="M264.5 50h0"></path>
<path d="M293 50h0"></path>
<rect x="264.5" y="39" width="28.5" height="22" rx="10" ry="10"></rect>
<text x="278.75" y="54">:</text>
</g>
<path d="M293 50h10"></path>
<g>
<path d="M303 50h0"></path>
<path d="M442.5 50h0"></path>
<path d="M303 50h20"></path>
<g>
<path d="M323 50h99.5"></path>
</g>
<path d="M422.5 50h20"></path>
<path d="M303 50a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path>
<g>
<path d="M323 93h0"></path>
<path d="M422.5 93h0"></path>
<rect x="323" y="74" width="99.5" height="38" rx="10" ry="10" class="group-box"></rect>
<g class="non-terminal ">
<path d="M323 93h10"></path>
<path d="M412.5 93h10"></path>
<rect x="333" y="82" width="79.5" height="22"></rect>
<text x="372.75" y="97">integer</text>
</g>
<g class="comment ">
<path d="M323 66h0"></path>
<path d="M361 66h0"></path>
<text x="342" y="71" class="comment">stop</text>
</g>
</g>
<path d="M422.5 93a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path>
</g>
<g>
<path d="M442.5 50h0"></path>
<path d="M660.5 50h0"></path>
<path d="M442.5 50h20"></path>
<g>
<path d="M462.5 50h178"></path>
</g>
<path d="M640.5 50h20"></path>
<path d="M442.5 50a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
<g>
<path d="M462.5 70h0"></path>
<path d="M640.5 70h0"></path>
<g class="terminal ">
<path d="M462.5 70h0"></path>
<path d="M491 70h0"></path>
<rect x="462.5" y="59" width="28.5" height="22" rx="10" ry="10"></rect>
<text x="476.75" y="74">:</text>
</g>
<path d="M491 70h10"></path>
<g>
<path d="M501 70h0"></path>
<path d="M640.5 70h0"></path>
<path d="M501 70h20"></path>
<g>
<path d="M521 70h99.5"></path>
</g>
<path d="M620.5 70h20"></path>
<path d="M501 70a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path>
<g>
<path d="M521 113h0"></path>
<path d="M620.5 113h0"></path>
<rect x="521" y="94" width="99.5" height="38" rx="10" ry="10" class="group-box"></rect>
<g class="non-terminal ">
<path d="M521 113h10"></path>
<path d="M610.5 113h10"></path>
<rect x="531" y="102" width="79.5" height="22"></rect>
<text x="570.75" y="117">integer</text>
</g>
<g class="comment ">
<path d="M521 86h0"></path>
<path d="M559 86h0"></path>
<text x="540" y="91" class="comment">step</text>
</g>
</g>
<path d="M620.5 113a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path>
</g>
</g>
<path d="M640.5 70a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
</g>
</g>
<path d="M660.5 50a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
</g>
<path d="M 680.5 30 h 20 m 0 -10 v 20"></path>
</g>
<style>
	svg {
		background-color: hsl(30,20%,95%);
	}
	path {
		stroke-width: 3;
		stroke: black;
		fill: rgba(0,0,0,0);
	}
	text {
		font: bold 14px monospace;
		text-anchor: middle;
		white-space: pre;
	}
	text.diagram-text {
		font-size: 12px;
	}
	text.diagram-arrow {
		font-size: 16px;
	}
	text.label {
		text-anchor: start;
	}
	text.comment {
		font: italic 12px monospace;
	}
	g.non-terminal text {
		/&#42;font-style: italic;&#42;/
	}
	rect {
		stroke-width: 3;
		stroke: black;
		fill: hsl(120,100%,90%);
	}
	rect.group-box {
		stroke: gray;
		stroke-dasharray: 10 5;
		fill: none;
	}
	path.diagram-text {
		stroke-width: 3;
		stroke: black;
		fill: white;
		cursor: help;
	}
	g.diagram-text:hover path.diagram-text {
		fill: #eee;
	}</style>
</svg>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id1">
<h3>jq Script<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>In addition to the native DSL, <em>vmt-connect</em> supports <a class="reference external" href="https://stedolan.github.io/jq/manual/">jq script</a> via the <a class="reference external" href="https://pypi.org/project/jq/">jq python</a>
package. Jq provides a more powerful parsing language for not simply filtering,
but also altering JSON content. This includes value checking, recursion, deletion,
insertion, and numerous other functions. Unfortunately this capability comes at
a significant performance and memory hit compared to the native DSL on very large
responses. The entirety of jq cannot be covered here, though a couple examples
are provided below to demonstrate the usage difference. The primary defining
difference is that jq scripts must be provided as a single string, and not as a
python list.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Jq must be installed on the host system, and the jq python module must also
be installed for <em>vmt-connect</em> using pip Extras. Jq is not installed or enabled
by default with <em>vmt-connect</em>.</p>
<dl class="simple">
<dt>Example:</dt><dd><p>pip install vmt-connect[jq]</p>
</dd>
</dl>
</div>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Jq style multiple keys selection</span><a class="headerlink" href="#id11" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="s1">&#39;. | {uuid, details, actionType, target}&#39;</span>
</pre></div>
</div>
</div>
<p>See <a class="reference internal" href="#ex1"><span class="std std-ref">Multiple Keys Compact</span></a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Jq style multiple keys selection</span><a class="headerlink" href="#id12" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  . | {</span>
<span class="s2">    uuid,</span>
<span class="s2">    details,</span>
<span class="s2">    actionType,</span>
<span class="s2">    target: (</span>
<span class="s2">       .target | {</span>
<span class="s2">         uuid,</span>
<span class="s2">         className,</span>
<span class="s2">         displayName,</span>
<span class="s2">         discoveredBy: (.discoveredBy | </span><span class="si">{displayName}</span><span class="s2">)</span>
<span class="s2">       }</span>
<span class="s2">    )</span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<p>See <a class="reference internal" href="#ex2"><span class="std std-ref">Sub-selecting Parts of an object</span></a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Filtering based on values</span><a class="headerlink" href="#id13" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="s1">&#39;. | select(.actionType == &quot;DELETE&quot;) | {uuid, details, actionType, target}&#39;</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="version-control">
<h2>Version Control<a class="headerlink" href="#version-control" title="Permalink to this heading"></a></h2>
<p>When specific implementations, integrations, or scripts require specific versions
of Turbonomic, need to override one of the minimum versions, or need to exclude
incompatible versions, you will need to pass in a custom <a class="reference internal" href="reference.html#vmtconnect.VersionSpec" title="vmtconnect.VersionSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">VersionSpec</span></code></a>
to your connection. The version specification object permits fine grained control
of which versions you wish to restrict execution to, and supports both white lists
and black lists.</p>
<p>To lock a script to a specific version you would use a spec as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">VersionSpec</span><span class="p">([</span><span class="s1">&#39;6.4.10&#39;</span><span class="p">])</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="n">req_versions</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
</pre></div>
</div>
<p>If, on the other hand, you only need to exclude specific problematic dot releases
from a branch, you would be better served with the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">VersionSpec</span><span class="p">([</span><span class="s1">&#39;6.4+&#39;</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;6.4.1&#39;</span><span class="p">,</span> <span class="s1">&#39;6.4.2&#39;</span><span class="p">,</span> <span class="s1">&#39;6.4.5&#39;</span><span class="p">,</span> <span class="s1">&#39;6.4.12&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>In some cases you may be working on a development build, which Turbonomic terms
a snapshot. These builds have a string flag ‘SNAPSHOT’ appended to the version
which is generally not parsable by the version logic, and will produce an error.
To explicitly allow a dev build, or work around an erroneously flagged version,
set the <strong>snapshot</strong> parameter to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">VersionSpec</span><span class="p">([</span><span class="s1">&#39;7.21+&#39;</span><span class="p">],</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="credentials">
<h2>Credentials<a class="headerlink" href="#credentials" title="Permalink to this heading"></a></h2>
<p>Prior to v3.3.0, <em>vmt-connect</em> provided no native mechanism for securing credentials.
To fill the gap Turbonomic provided a package called “TurboAPICredStore”, which
provided for the creation and management of encrypted API credentials. That library
has now been integrated directly into <em>vmt-connect</em> as the security module.
Credentials are managed using the <a class="reference internal" href="reference.html#vmtconnect.security.Credential" title="vmtconnect.security.Credential"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credential</span></code></a>
class, and a command-line utility is provided for creating credentials in a similar
manner to what TurboAPICredStore had provided.</p>
<p><em>vmt-connect</em> utilizes the <a class="reference external" href="https://pypi.org/project/cryptography/">cryptography</a> package for symmetric encryption using
the <a class="reference external" href="https://github.com/fernet/spec/blob/master/Spec.md">Fernet</a> specification. This means in addition to the encrypted message,
called a token, there is a unique encryption key, the secret, which must be secured
separately. <em>vmt-connect</em> necessarily leaves the security of the secret key up
to the user, and appropriate measures must be taken to ensure access to the secret
is available only to intended parties.</p>
<section id="module-interface">
<h3>Module Interface<a class="headerlink" href="#module-interface" title="Permalink to this heading"></a></h3>
<p>Encrypted credentials can be created, and retrieved using the security module’s
<a class="reference internal" href="reference.html#vmtconnect.security.Credential" title="vmtconnect.security.Credential"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credential</span></code></a> class. Creating new credentials can
be done with the interactive using the <a class="reference internal" href="reference.html#vmtconnect.security.Credential.create" title="vmtconnect.security.Credential.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create()</span></code></a>
method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cred</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">Credential</span><span class="p">()</span>
<span class="n">cred</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
<p>If no parameters are supplied, the user will be prompted for a username and password,
which will be encrypted with a new unique key. Because this method has interactive
inputs, in general it is advisable to create new credentials using the command-line
interface, detailed further down; or by providing a context appropriate wrapper
for the <a class="reference internal" href="reference.html#vmtconnect.security.Credential.set" title="vmtconnect.security.Credential.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a> method.</p>
<p>Working with existing credentials is fairly simple. Upon initialization you may
specify either or both the key file and credential file to the constructor.
Credentials can then be decrypted directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cred</span> <span class="o">=</span> <span class="n">vmtconnect</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">Credential</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;/keystore/.turbokey&#39;</span><span class="p">,</span> <span class="n">cred</span><span class="o">=</span><span class="s1">&#39;user.cred&#39;</span><span class="p">)</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">cred</span><span class="o">.</span><span class="n">decrypt</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="command-line-interface">
<h3>Command-line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this heading"></a></h3>
<p>The command-line interface utility, turboauth, is intended for creating encrypted
credentials for the Turbonomic API in anticipation for automated integrations.
The command can be used to create new, or replace existing credential and key
files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create new set in the current folder</span>
<span class="c1"># if the key file already exists, it will be re-used for encryption instead</span>
<span class="c1"># of being overwritten</span>
turboauth -k .key -c user.cred

<span class="c1"># to overwrite files, you must use the -f or --force flag</span>
turboauth -k .key -c user.cred -f

<span class="c1"># to change the basepath of the files, use the -b or --basepath option</span>
turboauth -b .secret -k .key -c user.cred
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="userguide.html" class="btn btn-neutral float-left" title="Basic User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reference.html" class="btn btn-neutral float-right" title="Developer Interfaces" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2022.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>